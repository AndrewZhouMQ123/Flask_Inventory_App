{% extends "base.html" %}
{% block title %}Edit Todo{% endblock %}

{% block content %}
    <h1>Todo {{ todo.id }}</h1>
    <script src="/js/remind.js"></script>
    <form action="{{ url_for('todos.edit, id=todo.id') }}" method="POST"></form>
        <h3>Edit Todo</h3>
        <strong>Title: </strong><br>
        <input type="text" name="title" value="{{ todo.title }}" placeholder="title" required="required"><br>
        <strong>Description: </strong><br>
        <textarea name="description">{{ todo.description }}</textarea><br>
        <label for="done">Is this todo task done/completed?</label><br>
        <input type="radio" name="done" value="yes" {% if todo.done %}checked{% endif %}> Yes
        <input type="radio" name="done" value="no" {% if not todo.done %}checked{% endif %}> No<br>
        <input type="datetime-local" id="due_date" name="due_date" required/>
        <button type="submit" class="btn btn-primary">Save Edit</button>
    </form>
    <button type="button" class="btn btn-danger" onclick="{{ url_for('todos.delete', id=todo.id) }}">Delete</button>

    <script>
        // Get the current date and time
        const now = new Date();
    
        // Set the min value to the current time (formatted for datetime-local)
        const minDateTime = now.toISOString().slice(0, 16); // 'YYYY-MM-DDTHH:MM'
    
        // Set the max value to 24 hours from now
        const maxDateTime = new Date(now.getTime() + 24 * 60 * 60 * 1000).toISOString().slice(0, 16);
    
        // Set the input field's min and max attributes
        const dueDateInput = document.getElementById('due-date');
        dueDateInput.min = minDateTime;
        dueDateInput.max = maxDateTime;
    </script>

{% endblock %}